<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>PouchDB, the JavaScript Database that Syncs!</title>
    <link rel="stylesheet" href="/static/style/pouchdb.css" />
    <link rel="stylesheet" href="/static/style/solarized_dark.min.css">
  </head>

  <body>

    <header>
      <h1><a href="/">PouchDB</a></h1>
      <h5>The JavaScript Database that Syncs!</h5>

      <section style="background: #EEE;float:left;">
        <input type="radio" id="nightly-min" name="download"
               checked="checked" value="min" />
        <label for="nightly-min">Production (Nightly)</label><br />

        <input type="radio" id="nightly-dev" name="download" value="dev" />
        <label for="nightly-dev">Development (Nightly)</label><br />

        <button id="download-button">Download PouchDB</button>
      </section>

      <nav>
        <ul>
          <li><a href="/">What is PouchDB?</a></li>
          <li><a href="/api.html">API Documentation</a></li>
          <li><a href="https://github.com/daleharvey/pouchdb/wiki">Wiki</a></li>
          <li><a href="https://groups.google.com/d/forum/pouchdb">Mailing List</a></li>
          <li><a href="https://github.com/daleharvey/pouchdb">Source & Issues</a></li>
          <li><a href="https://twitter.com/pouchdb">Twitter</a></li>
        </ul>
      </nav>
    </header>

    <section id="content"><h1 id='api_documentation'>API Documentation</h1>

<p>Most of the Pouch API is exposed as <code>fun(arg, [options], [callback])</code> Where both the options and the callback are optional. Callbacks are in the node.js idiom of <code>function(err, data)</code> Where the first argument will be undefined unless there is an error, further arguments specify the result.</p>

<h3 id='api_methods'>API Methods</h3>

<ul>
<li><a href='#create_a_database'>Create a database</a></li>

<li><a href='#delete_a_database'>Delete a database</a></li>

<li><a href='#create_a_document'>Create a document</a></li>

<li><a href='#update_a_document'>Update a document</a></li>

<li><a href='#create_a_batch_of_documents'>Create a batch of documents</a></li>

<li><a href='#fetch_a_document'>Fetch a document</a></li>

<li><a href='#fetch_documents'>Fetch documents</a></li>

<li><a href='#query_the_database'>Query the database</a></li>

<li><a href='#delete_a_document'>Delete a document</a></li>

<li><a href='#get_database_information'>Get database information</a></li>

<li><a href='#listen_to_database_changes'>Listen to database changes</a></li>

<li><a href='#replicate_a_database'>Replicate a database</a></li>
</ul>

<h2 id='create_a_database'>Create a database</h2>

<pre><code>Pouch(&#39;idb://dbname&#39;, [options], [callback])</code></pre>

<p>This method gets an existing database if one exists or creates a new one if one does not exist. The protocol field denotes which backend you want to use (current options are idb, http and ldb)</p>

<pre><code>var pouchdb;
Pouch(&#39;idb://test&#39;, function(err, db) {
   pouchdb = db;
  // Use pouchdb to call further functions
  pouchdb.post(....
})</code></pre>

<h2 id='delete_a_database'>Delete a database</h2>

<pre><code>Pouch.destroy(name, [callback])</code></pre>

<p>Delete database with given name</p>

<pre><code>Pouch.destroy(&#39;idb://test&#39;, function(err, info) {
  // database deleted
})</code></pre>

<h2 id='create_a_document'>Create a document</h2>

<pre><code>db.post(doc, [options], [callback])</code></pre>

<p>Create a new document. Only use <code>db.post</code> if you want PouchDB to generate an ID for your document, otherwise use <code>db.put</code></p>

<pre><code>db.post({ title: &#39;Cony Island Baby&#39; }, function(err, response) {
  // Response:
  // {
  //   &quot;ok&quot;: true,
  //   &quot;id&quot;: &quot;0B3358C1-BA4B-4186-8795-9024203EB7DD&quot;,
  //   &quot;rev&quot;: &quot;1-5782E71F1E4BF698FA3793D9D5A96393&quot;
  // }
})</code></pre>

<h2 id='update_a_document'>Update a document</h2>

<pre><code>db.put(doc, [options], [callback])</code></pre>

<p>Create a new document or update an existing document. If the document already exists you must specify its revision (_rev), otherwise a conflict will occur.</p>

<pre><code>db.put({ _id: &#39;mydoc&#39;, title: &#39;Rock and Roll Heart&#39; }, function(err, response) {
  // Response:
  // {
  //   &quot;ok&quot;: true,
  //   &quot;id&quot;: &quot;mydoc&quot;,
  //   &quot;rev&quot;: &quot;1-A6157A5EA545C99B00FF904EEF05FD9F&quot;
  // }
})</code></pre>

<h2 id='save_an_attachment_to_a_document'>Save an attachment to a document</h2>

<pre><code> db.putAttachment(id, rev, doc, type, [callback])</code></pre>

<p>Create an attachment in an existing document.</p>

<pre><code>db.put({ _id: &#39;otherdoc&#39;, title: &#39;Legendary Hearts&#39; }, function(err, response) {
  var doc = &#39;Legendary hearts, tear us all apart\nMake our emotions bleed, crying out in need&#39;;
  db.putAttachment(&#39;otherdoc/text&#39;, response.rev, doc, &#39;text/plain&#39;, function(err, res) {
    // Response:
    // {
    //   &quot;ok&quot;: true,
    //   &quot;id&quot;: &quot;otherdoc&quot;,
    //   &quot;rev&quot;: &quot;2-068E73F5B44FEC987B51354DFC772891&quot;
    // }
  })
})</code></pre>

<h2 id='create_a_batch_of_documents'>Create a batch of documents</h2>

<pre><code>db.bulkDocs(docs, [options], [callback])</code></pre>

<p>Modify, create or delete multiple documents.</p>

<pre><code>db.bulkDocs({ docs: [{ title: &#39;Lisa Says&#39; }] }, function(err, response) {
  // Response array:
  // [
  //   {
  //     &quot;ok&quot;: true,
  //     &quot;id&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //     &quot;rev&quot;: &quot;1-A8BC08745E62E58830CA066D99E5F457&quot;
  //   }
  // ]
})</code></pre>

<h2 id='fetch_a_document'>Fetch a document</h2>

<pre><code>db.get(docid, [options], [callback])</code></pre>

<p>Getrieves a document, specified by <code>docid</code>.</p>

<ul>
<li><code>options.revs</code>: Include revision history of the document</li>

<li><code>options.revs_info</code>: Include a list of revisions of the document, and their availability.</li>
</ul>
<span />
<pre><code>db.bulkDocs({ docs: [{ title: &#39;Lisa Says&#39; }] }, function(err, response) {
  // Response array:
  // [
  //   {
  //     &quot;ok&quot;: true,
  //     &quot;id&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //     &quot;rev&quot;: &quot;1-A8BC08745E62E58830CA066D99E5F457&quot;
  //   }
  // ]
})

db.get(&#39;mydoc&#39;, function(err, doc) {
  // Document:
  // {
  //   &quot;title&quot;: &quot;Rock and Roll Heart&quot;,
  //   &quot;_id&quot;: &quot;mydoc&quot;,
  //   &quot;_rev&quot;: &quot;1-A6157A5EA545C99B00FF904EEF05FD9F&quot;
  // }
})</code></pre>

<h2 id='fetch_documents'>Fetch documents</h2>

<pre><code>db.allDocs([options], [callback])</code></pre>

<p>Fetch multiple documents.</p>

<ul>
<li><code>options.include_docs</code>: Include the associated document with each change</li>

<li><code>options.conflicts</code>: Include conflicts</li>

<li><code>options.startkey</code> &amp; <code>options.endkey</code>: Get documents with keys in a certain range</li>

<li><code>options.descending</code>: Reverse the order of the output table</li>
</ul>
<span />
<pre><code>db.allDocs(function(err, response) {
  // Document rows:
  // {
  //   &quot;total_rows&quot;: 4,
  //   &quot;rows&quot;: [
  //     {
  //       &quot;id&quot;: &quot;0B3358C1-BA4B-4186-8795-9024203EB7DD&quot;,
  //       &quot;key&quot;: &quot;0B3358C1-BA4B-4186-8795-9024203EB7DD&quot;,
  //       &quot;value&quot;: {
  //         &quot;rev&quot;: &quot;1-5782E71F1E4BF698FA3793D9D5A96393&quot;
  //       }
  //     },
  //     {
  //       &quot;id&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //       &quot;key&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //       &quot;value&quot;: {
  //         &quot;rev&quot;: &quot;1-A8BC08745E62E58830CA066D99E5F457&quot;
  //       }
  //     },
  //     {
  //       &quot;id&quot;: &quot;mydoc&quot;,
  //       &quot;key&quot;: &quot;mydoc&quot;,
  //       &quot;value&quot;: {
  //         &quot;rev&quot;: &quot;1-A6157A5EA545C99B00FF904EEF05FD9F&quot;
  //       }
  //     },
  //     {
  //       &quot;id&quot;: &quot;otherdoc&quot;,
  //       &quot;key&quot;: &quot;otherdoc&quot;,
  //       &quot;value&quot;: {
  //         &quot;rev&quot;: &quot;1-3753476B70A49EA4D8C9039E7B04254C&quot;
  //       }
  //     }
  //   ]
  // }
})</code></pre>

<h2 id='query_the_database'>Query the database</h2>

<pre><code>db.query(fun, [options], [callback])</code></pre>

<p>Retrieve a view.</p>

<ul>
<li><code>fun</code>: Name of a view function or function</li>

<li><code>options.reduce</code>: To reduce or not. The default is to reduce if there is a reduce function</li>
</ul>
<span />
<pre><code>function map(doc) {
  if(doc.title) {
    emit(doc.title, null);
  }
}

db.query({map: map}, {reduce: false}, function(err, response) {
  // View rows:
  // {
  //   &quot;rows&quot;: [
  //     {
  //       &quot;id&quot;: &quot;0B3358C1-BA4B-4186-8795-9024203EB7DD&quot;,
  //       &quot;key&quot;: &quot;Cony Island Baby&quot;,
  //       &quot;value&quot;: null
  //     },
  //     {
  //       &quot;id&quot;: &quot;otherdoc&quot;,
  //       &quot;key&quot;: &quot;Legendary Hearts&quot;,
  //       &quot;value&quot;: null
  //     },
  //     {
  //       &quot;id&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //       &quot;key&quot;: &quot;Lisa Says&quot;,
  //       &quot;value&quot;: null
  //     },
  //     {
  //       &quot;id&quot;: &quot;mydoc&quot;,
  //       &quot;key&quot;: &quot;Rock and Roll Heart&quot;,
  //       &quot;value&quot;: null
  //     }
  //   ]
  // }
})</code></pre>

<h2 id='delete_a_document'>Delete a document</h2>

<pre><code>db.remove(doc, [options], [callback])</code></pre>

<p>Delete a document.</p>

<pre><code>db.get(&#39;mydoc&#39;, function(err, doc) {
  db.remove(doc, function(err, response) {
    // Response:
    // {
    //   &quot;ok&quot;: true,
    //   &quot;id&quot;: &quot;mydoc&quot;,
    //   &quot;rev&quot;: &quot;2-9AF304BE281790604D1D8A4B0F4C9ADB&quot;
    // }
  })
})</code></pre>

<h2 id='get_database_information'>Get database information</h2>

<pre><code>db.info(callback)</code></pre>

<p>Get information about a database.</p>

<pre><code>db.info(function(err, info) {
  // Database information:
  // {
  //   &quot;db_name&quot;: &quot;test&quot;,
  //   &quot;doc_count&quot;: 4,
  //   &quot;update_seq&quot;: 0
  // }
})</code></pre>

<h2 id='listen_to_database_changes'>Listen to database changes</h2>

<pre><code>db.changes(options)</code></pre>

<p>A list of changes made to documents in the database, in the order they were made.</p>

<ul>
<li><code>options.include_docs</code>: Include the associated document with each change</li>

<li><code>options.continuous</code>: Use <em>longpoll</em> feed</li>

<li><code>options.conflicts</code>: Include conflicts</li>

<li><code>options.descending</code>: Reverse the order of the output table</li>

<li><code>options.filter</code>: Reference a filter function from a design document to selectively get updates</li>

<li><code>options.since</code>: Start the results from the change immediately after the given sequence number</li>

<li><code>options.complete</code>: Function called when all changes have been processed, defaults to the callback</li>

<li><code>options.onChange</code>: Function called on each change after deduplication (only sends the most recent for each document), not called as a callback but called as onChange(change)</li>
</ul>
<span />
<pre><code>db.changes(options, function(err, response) {
  // Changes list:
  // {
  //   &quot;results&quot;: [
  //     {
  //       &quot;id&quot;: &quot;0B3358C1-BA4B-4186-8795-9024203EB7DD&quot;,
  //       &quot;seq&quot;: 1,
  //       &quot;changes&quot;: [
  //         {
  //           &quot;rev&quot;: &quot;1-5782E71F1E4BF698FA3793D9D5A96393&quot;
  //         }
  //       ]
  //     },
  //     {
  //       &quot;id&quot;: &quot;mydoc&quot;,
  //       &quot;seq&quot;: 2,
  //       &quot;changes&quot;: [
  //         {
  //           &quot;rev&quot;: &quot;1-A6157A5EA545C99B00FF904EEF05FD9F&quot;
  //         }
  //       ]
  //     },
  //     {
  //       &quot;id&quot;: &quot;otherdoc&quot;,
  //       &quot;seq&quot;: 3,
  //       &quot;changes&quot;: [
  //         {
  //           &quot;rev&quot;: &quot;1-3753476B70A49EA4D8C9039E7B04254C&quot;
  //         }
  //       ]
  //     },
  //     {
  //       &quot;id&quot;: &quot;828124B9-3973-4AF3-9DFD-A94CE4544005&quot;,
  //       &quot;seq&quot;: 4,
  //       &quot;changes&quot;: [
  //         {
  //           &quot;rev&quot;: &quot;1-A8BC08745E62E58830CA066D99E5F457&quot;
  //         }
  //       ]
  //     }
  //   ]
  // }
})</code></pre>

<h2 id='replicate_a_database'>Replicate a database</h2>

<pre><code>Pouch.replicate(from, to, [options], [callback])</code></pre>

<p>Replicate one database to another.</p>

<ul>
<li><code>options.filter</code>: Reference a filter function from a design document to selectively get updates</li>

<li><code>options.complete</code>: Function called when all changes have been processed, defaults to the callback</li>

<li><code>options.onChange</code>: Function called on each change after deduplication (only sends the most recent for each document), not called as a callback but called as onChange(change)</li>
</ul>
<span />
<pre><code>Pouch.replicate(&#39;idb://mydb&#39;, &#39;http://localhost:5984/mydb&#39;, function(err, changes) {
  //
})</code></pre></section>

    <script src="/static/js/pouchdb.website.js"></script>
    <script src="/static/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
