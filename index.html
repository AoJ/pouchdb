<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PouchDB</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/">PouchDB</a></h1>
        <p>PouchDB is a pocket-sized database.</p>
        <ul>
          <li>
            <a href="/downloads/pouch.alpha.min.js">
              <strong>Download pouch.alpha.min.js (36Kb)</strong>
            </a>
            or the <a href="test">uncompressed source</a> (56Kb)
          </li>
        </ul>
        <h2><a href="#api-docs">API Documentation</a></h2>
        <h2><a href="https://github.com/daleharvey/pouchdb/wiki">Wiki</a></h2>
        <h2><a href="https://groups.google.com/d/forum/pouchdb">Discussion Group</a></h2>
        <h2><a href="https://github.com/daleharvey/pouchdb">Source & Bugs</a></h2>
        <h2><a href="https://twitter.com/pouchdb">Twitter</a></h2>

        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>

      </header>
      <section>
<h1>PouchDB</h1>

<p>PouchDB is a JavaScript library that allows you to store and query data for web applications that need to work offline, and sync with an online database when you are online.</p>

<h4>The Browser Database that Syncs</h4>

<p>Based on the work of <a href="">Apache CouchDB</a>, PouchDB provides a simple API in which to store and retrieve JSON objects, due to the similiar API, and CouchDB's HTTP API it is possible to sync data that is stored in your local PouchDB to an online CouchDB as well as syncing data from CouchDB down to PouchDB (you can even sync between 2 PouchDB databases).</p>

<h4>Status & Browser Support</h4>

<p>PouchDB is currently in alpha preview. The first version will support browsers that have implemented the <a href="http://www.w3.org/TR/IndexedDB/">HTML5 IndexedDB API</a>. Work is being done on providing support for <a href="https://github.com/daleharvey/pouchdb/issues/63">WebSQL</a> as well as <a href="https://github.com/daleharvey/pouchdb/issues/44">LocalStorage</a> and <a href="https://github.com/daleharvey/pouchdb/issues/82">node.js</a>. Currently tested in:</p>
<ul>
  <li>Firefox 12+</li>
  <li>Chrome 19+</li>
</ul>
</p>

<h1>Getting started</h1>

<p>Download <a href="">pouch.js</a> and include in your HTML.</p>

<pre><code>var authors = [
  {name: 'Dale Harvey', commits: 253},
  {name: 'Mikeal Rogers', commits: 42},
  {name: 'Johannes J. Schmidt', commits: 13},
  {name: 'Randall Leeds', commits: 9}
];
Pouch('idb://authors', function(err, db) {
  // Opened a new database
  db.bulkDocs({docs: authors}, function(err, results) {
    // Saved the documents into the database
    db.replicate.to('http://example.com/thecloud', function() {
      // The documents are now in the cloud!
    });
  });
});</code></pre>

<h1 id="api-docs">API Documentation</h1>

<p>Most of the Pouch API is exposed as <code>fun(arg, [options], [callback])</code> Where both the options and the callback are optional. Callbacks are in the node.js idiom of <code>function(err, data)</code> Where the first argument will be undefined unless there is an error, further arguments specify the result.</p>

<ul>
  <li><a href="#api-create-db">Create a database</a></li>
  <li><a href="#api-delete-db">Delete a database</a></li>
  <li><a href="#api-create-doc">Create a document</a></li>
  <li><a href="#api-create-docs">Create a batch of documents</a></li>
  <li><a href="#api-fetch-doc">Fetch a document</a></li>
  <li><a href="#api-fetch-docs">Fetch documents</a></li>
  <li><a href="#api-query-db">Query the database</a></li>
  <li><a href="#api-delete-doc">Delete a document</a></li>
  <li><a href="#api-db-info">Get database information</a></li>
  <li><a href="#api-db-changes">Listen to database changes</a></li>
  <li><a href="#api-db-replicate">Replicate a database</a></li>
</ul>

<h2>new Pouch('idb://dbname', [options], [callback])</h2>

<p>This method gets an existing database if one exists or creates a new one if one does not exist. The protocol field denotes which backend you want to use (currently only http and indexeddb are supported)</p>

<pre>
new Pouch('idb://test', function(err, db) {
  // Use db to call further functions
})
</pre>

<h2>db</h2>

<p>The subject of the of pouch.open. This is primary PouchDB API.</p>

<h3>db.post(doc, [options], [callback])</h3>

<p>Create a new document.</p>

<pre>
db.post({ title: 'Cony Island Baby' }, function(err, response) {
  // Response:
  // {
  //   "ok": true,
  //   "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //   "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  // }
})
</pre>

<h3>db.put(doc, [options], [callback])</h3>

<p>Create a new document or update an existing document.</p>

<pre>
db.put({ _id: 'mydoc', title: 'Rock and Roll Heart' }, function(err, response) {
  // Response:
  // {
  //   "ok": true,
  //   "id": "mydoc",
  //   "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  // }
})
</pre>

<h3>db.get(docid, [options], [callback])</h3>

<p>Getrieves a document, specified by <code>docid</code>.</p>

<ul>
<li>
<code>options.revs</code>: Include revision history of the document</li>
<li>
<code>options.revs_info</code>: Include a list of revisions of the document, and their availability</li>
</ul><pre>
db.get('mydoc', function(err, doc) {
  // Document:
  // {
  //   "title": "Rock and Roll Heart",
  //   "_id": "mydoc",
  //   "_rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  // }
})
</pre>

<h3>db.putAttachment(id, rev, doc, type, [callback])</h3>

<p>Create an attachment in an existing document.</p>

<pre>
db.put({ _id: 'otherdoc', title: 'Legendary Hearts' }, function(err, response) {
  var doc = 'Legendary hearts, tear us all apart\nMake our emotions bleed, crying out in need';
  db.putAttachment('otherdoc/text', response.rev, doc, 'text/plain', function(err, res) {
    // Response:
    // {
    //   "ok": true,
    //   "id": "otherdoc",
    //   "rev": "2-068E73F5B44FEC987B51354DFC772891"
    // }
  })
})
</pre>

<h3>db.bulkDocs(docs, [options], [callback])</h3>

<p>Modify multiple documents.</p>

<pre>
db.bulkDocs({ docs: [{ title: 'Lisa Says' }] }, function(err, response) {
  // Response array:
  // [
  //   {
  //     "ok": true,
  //     "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //     "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //   }
  // ]
})
</pre>

<h3>db.allDocs([options], [callback])</h3>

<p>Fetch multiple documents.</p>

<ul>
<li>
<code>options.include_docs</code>: Include the associated document with each change</li>
<li>
<code>options.conflicts</code>: Include conflicts</li>
<li>
<code>options.startkey</code> &amp; <code>options.endkey</code>: Get documents with keys in a certain range</li>
<li>
<code>options.descending</code>: Reverse the order of the output table</li>
</ul><pre>
db.allDocs(function(err, response) {
  // Document rows:
  // {
  //   "total_rows": 4,
  //   "rows": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "key": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "value": {
  //         "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  //       }
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "key": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "value": {
  //         "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //       }
  //     },
  //     {
  //       "id": "mydoc",
  //       "key": "mydoc",
  //       "value": {
  //         "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  //       }
  //     },
  //     {
  //       "id": "otherdoc",
  //       "key": "otherdoc",
  //       "value": {
  //         "rev": "1-3753476B70A49EA4D8C9039E7B04254C"
  //       }
  //     }
  //   ]
  // }
})
</pre>

<h3>db.query(fun, [options], [callback])</h3>

<p>Retrieve a view.</p>

<ul>
<li>
<code>fun</code>: Name of a view function or function</li>
<li>
<code>options.reduce</code>: To reduce or not. The default is to reduce if there is a reduce function</li>
</ul><pre>
function map(doc) {
  if(doc.title) {
    emit(doc.title, null);
  }
}
db.query({ map: map, function(err, response) {
  // View rows:
  // {
  //   "rows": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "key": "Cony Island Baby",
  //       "value": null
  //     },
  //     {
  //       "id": "otherdoc",
  //       "key": "Legendary Hearts",
  //       "value": null
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "key": "Lisa Says",
  //       "value": null
  //     },
  //     {
  //       "id": "mydoc",
  //       "key": "Rock and Roll Heart",
  //       "value": null
  //     }
  //   ]
  // }
})
</pre>

<h3>db.remove(doc, [options], [callback])</h3>

<p>Delete a document.</p>

<pre>
db.get('mydoc', function(err, doc) {
  db.remove(doc, function(err, response) {
    // Response:
    // {
    //   "ok": true,
    //   "id": "mydoc",
    //   "rev": "2-9AF304BE281790604D1D8A4B0F4C9ADB"
    // }
  })
})
</pre>

<h3>db.info(callback)</h3>

<p>Get information about a database.</p>

<pre>
db.info(function(err, info) {
  // Database information:
  // {
  //   "db_name": "test",
  //   "doc_count": 4,
  //   "update_seq": 0
  // }
})
</pre>

<h3>db.changes(options)</h3>

<p>A list of changes made to documents in the database, in the order they were made.</p>

<ul>
<li>
<code>options.include_docs</code>: Include the associated document with each change</li>
<li>
<code>options.continuous</code>: Use <em>longpoll</em> feed</li>
<li>
<code>options.conflicts</code>: Include conflicts</li>
<li>
<code>options.descending</code>: Reverse the order of the output table</li>
<li>
<code>options.filter</code>: Reference a filter function from a design document to selectively get updates</li>
<li>
<code>options.since</code>: Start the results from the change immediately after the given sequence number</li>
</ul><pre>
db.changes(function(err, response) {
  // Changes list:
  // {
  //   "results": [
  //     {
  //       "id": "0B3358C1-BA4B-4186-8795-9024203EB7DD",
  //       "seq": 1,
  //       "changes": [
  //         {
  //           "rev": "1-5782E71F1E4BF698FA3793D9D5A96393"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "mydoc",
  //       "seq": 2,
  //       "changes": [
  //         {
  //           "rev": "1-A6157A5EA545C99B00FF904EEF05FD9F"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "otherdoc",
  //       "seq": 3,
  //       "changes": [
  //         {
  //           "rev": "1-3753476B70A49EA4D8C9039E7B04254C"
  //         }
  //       ]
  //     },
  //     {
  //       "id": "828124B9-3973-4AF3-9DFD-A94CE4544005",
  //       "seq": 4,
  //       "changes": [
  //         {
  //           "rev": "1-A8BC08745E62E58830CA066D99E5F457"
  //         }
  //       ]
  //     }
  //   ]
  // }
})
</pre>

<h3>db.changes.addListener(listener)</h3>

<p>Register <code>listener</code> function for the changes feed.</p>

<h3>db.changes.removeListener(listener)</h3>

<h2>Pouch.destroy(name, [callback])</h2>

<p>Delete database with given name</p>

<pre>
Pouch.destroy('idb://test', function(err, info) {
  // database deleted
})
</pre>

<h2>Pouch.replicate(from, to, [callback])</h2>

<p>Replicate a database</p>

<pre>
db.replicate('idb://mydb', 'http://localhost:5984/mydb', function(err, changes) {
  //
})
</pre>
      </section>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
